<div class="employee-card">
  <!-- Empty State -->
  <div class="empty-state" *ngIf="!employee">
    <div class="empty-title">{{ 'No employees yet' | translate }}</div>
    <div class="empty-subtitle">{{ 'Start building your dream team!' | translate }}</div>
  </div>

  <!-- Employee Content -->
  <div *ngIf="employee">
  <!-- Employee Header -->
  <div class="employee-header">
    <div class="header-left">
      <img class="employee-avatar"
        [src]="employee.avatarUrl || '/images/avatar.png'"
        [alt]="employee.name" />
      <div class="employee-info">
        <div class="employee-name">{{ employee.name }}</div>
        <div class="employee-tags">
          <span class="tag" *ngFor="let role of employee.roles">{{ role
            }}</span>
        </div>
      </div>
    </div>
    <div class="header-right">
      <span class="status-indicator"
        [class.active]="employee.status === 'active'"></span>
      <span class="status-text">{{ statusText | translate }}</span>
      <span class="employee-rank">#{{ employee.rank }}</span>
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path d="M7.5 15L12.5 10L7.5 5" class="chevron-stroke" stroke-width="1.5"
          stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
  </div>

  <!-- Tab Buttons -->
  <div class="tab-buttons">
    <button type="button" class="tab-btn" [class.active]="activeTab === 'info'"
      (click)="switchTab('info')">{{ 'Info' | translate }}</button>
    <button type="button" class="tab-btn" [class.active]="activeTab === 'kpis'"
      (click)="switchTab('kpis')">{{ 'KPIs' | translate }}</button>
    <button type="button" class="tab-btn" [class.active]="activeTab === 'shift'"
      (click)="switchTab('shift')">{{ 'Shift' | translate }}</button>
  </div>

  <!-- Info Tab Content -->
  <div *ngIf="activeTab === 'info'" class="tab-content">
    <!-- Employee Details Grid -->
    <div class="details-grid">
      <div class="detail-item">
        <div class="detail-label">{{ 'Phone' | translate }}</div>
        <div class="detail-value">{{ employee.phone }}</div>
      </div>
      <div class="detail-item">
        <div class="detail-label">{{ 'Email' | translate }}</div>
        <div class="detail-value">{{ employee.email }}</div>
      </div>
      <div class="detail-item">
        <div class="detail-label">{{ 'Assessments' | translate }}</div>
        <div class="detail-value stars">{{ stars }}</div>
      </div>
      <div class="detail-item">
        <div class="detail-label">{{ 'Day' | translate }}</div>
        <div class="detail-value">{{ employee.workingHours.start }} - {{
          employee.workingHours.end }}</div>
      </div>
    </div>

    <!-- Suspend Button -->
    <div class="action-section">
      <button type="button" class="suspend-btn">{{ 'Suspend' | translate }}</button>
    </div>

    <!-- Horizontal Divider -->
    <div class="divider"></div>

    <!-- Cards Section: Productivity + AI Insights -->
    <div class="cards-section">
      <!-- Productivity Card -->
      <div class="mini-card productivity-card">
        <div class="card-header">
          <div class="icon-circle teal">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13.41 18.09V20H10.59V18.09C9.08 17.67 8 16.36 8 14.82C8 12.94 9.35 11.59 11.23 11.59C12.59 11.59 13.41 10.95 13.41 9.95C13.41 8.95 12.59 8.32 11.23 8.32C9.87 8.32 9.05 8.95 9.05 9.95H6.64C6.64 7.77 8.18 6.23 10.59 5.91V4H13.41V5.91C14.92 6.33 16 7.64 16 9.18C16 11.06 14.65 12.41 12.77 12.41C11.41 12.41 10.59 13.05 10.59 14.05C10.59 15.05 11.41 15.68 12.77 15.68C14.13 15.68 14.95 15.05 14.95 14.05H17.36C17.36 16.23 15.82 17.77 13.41 18.09Z"
                class="icon-fill-white" />
            </svg>
          </div>
          <h3 class="card-title">{{ 'Productivity' | translate }}</h3>
        </div>

        <div class="stats-row">
          <div class="stat">
            <div class="stat-label">{{ 'Avg time' | translate }}:</div>
            <div class="stat-value">{{ employee.productivity.avgTime }}</div>
          </div>
          <div class="stat">
            <div class="stat-label">{{ 'Completed orders' | translate }}:</div>
            <div class="stat-value">{{ employee.productivity.completedOrders
              }}</div>
          </div>
        </div>

        <div class="progress-section">
          <div class="progress-label">{{ 'Goal attainment' | translate }}</div>
          <div class="progress-bar">
            <div class="progress-fill"
              [style.width.%]="employee.productivity.goalAttainment"></div>
          </div>
        </div>
      </div>

      <!-- AI Insights Card -->
      <div class="mini-card ai-card">
        <div class="card-header">
          <div class="icon-circle blue">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z"
                class="icon-fill-white" />
            </svg>
          </div>
          <h3 class="card-title">{{ 'AI Insights' | translate }}</h3>
        </div>

        <div class="insight-text">
          {{ employee.aiInsight.message }}
          <span class="highlight-teal"
            *ngIf="employee.aiInsight.highlightValue">{{
            employee.aiInsight.highlightValue }}</span>
          {{ 'this week' | translate }}
        </div>
      </div>
    </div>
  </div>

  <!-- KPIs Tab Content -->
  <div *ngIf="activeTab === 'kpis' && employee.kpis"
    class="tab-content kpis-content">
    <div class="kpis-grid">
      <!-- Order Delivery Speed -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Order Delivery Speed' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.orderDeliverySpeed.value
            }}</div>
          <span class="kpi-change positive"
            *ngIf="employee.kpis.orderDeliverySpeed.isPositive">{{
            employee.kpis.orderDeliverySpeed.change }}</span>
        </div>
      </div>

      <!-- Order Accuracy -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Order Accuracy' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.orderAccuracy.value }}</div>
          <span class="kpi-change positive"
            *ngIf="employee.kpis.orderAccuracy.isPositive">{{
            employee.kpis.orderAccuracy.change }}</span>
        </div>
        <div class="donut-chart">
          <svg width="60" height="60" viewBox="0 0 60 60">
            <circle cx="30" cy="30" r="25" fill="none" class="donut-bg"
              stroke-width="10" />
            <circle cx="30" cy="30" r="25" fill="none" class="donut-fill"
              stroke-width="10"
              [attr.stroke-dasharray]="employee.kpis.orderAccuracy.percentage * 1.57 + ' 157'"
              transform="rotate(-90 30 30)" />
          </svg>
        </div>
      </div>

      <!-- Tables Managed -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Tables Managed' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.tablesManaged.value }}</div>
          <span class="kpi-change positive"
            *ngIf="employee.kpis.tablesManaged.isPositive">{{
            employee.kpis.tablesManaged.change }}</span>
        </div>
      </div>

      <!-- Table NPS (1-5) -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Table NPS (1-5)' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.tableNPS.value }}</div>
        </div>
      </div>

      <!-- Dishes / Hour -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Dishes / Hour' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.dishesPerHour.value }}</div>
          <span class="kpi-change positive"
            *ngIf="employee.kpis.dishesPerHour.isPositive">{{
            employee.kpis.dishesPerHour.change }}</span>
        </div>
      </div>

      <!-- Avg Prep Time -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Avg Prep Time' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.avgPrepTime.value }}</div>
          <span class="kpi-change negative"
            *ngIf="!employee.kpis.avgPrepTime.isPositive">{{
            employee.kpis.avgPrepTime.change }}</span>
        </div>
      </div>

      <!-- Delayed Tasks -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Delayed Tasks' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.delayedTasks.value }}</div>
          <span class="kpi-change positive"
            *ngIf="employee.kpis.delayedTasks.isPositive">{{
            employee.kpis.delayedTasks.change }}</span>
        </div>
      </div>

      <!-- Days Attended -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Days Attended' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.daysAttended.value }}</div>
        </div>
      </div>

      <!-- Task Reassignments -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Task Reassignments' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-value">{{ employee.kpis.taskReassignments.value
            }}</div>
        </div>
      </div>

      <!-- Engagement -->
      <div class="kpi-card">
        <div class="kpi-label">{{ 'Engagement' | translate }}</div>
        <div class="kpi-value-row">
          <div class="kpi-emoji">{{ employee.kpis.engagement.emoji }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Shift Tab Content -->
  <div *ngIf="activeTab === 'shift' && employee.shiftSchedule"
    class="tab-content shift-content">
    <div class="shift-calendar">
      <div class="day-column" *ngFor="let day of employee.shiftSchedule.days">
        <div class="day-header">{{ day.dayName }}</div>

        <div class="shifts-container">
          <div class="shift-block" *ngFor="let shift of day.shifts">
            <div class="shift-time">{{ shift.timeRange }}</div>
            <div class="shift-role">{{ shift.role }}</div>
          </div>
        </div>

        <button type="button" class="shift-button">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M2.66669 6.66665H13.3334M2.66669 6.66665V11.3333C2.66669 12.0697 3.26364 12.6666 4.00002 12.6666H12C12.7364 12.6666 13.3334 12.0697 13.3334 11.3333V6.66665M2.66669 6.66665V5.33331C2.66669 4.59694 3.26364 3.99998 4.00002 3.99998H5.33335M13.3334 6.66665V5.33331C13.3334 4.59694 12.7364 3.99998 12 3.99998H10.6667M5.33335 3.99998V2.66665M5.33335 3.99998H10.6667M10.6667 3.99998V2.66665"
              stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          <span>{{ 'Shift' | translate }}</span>
        </button>
      </div>
      </div>
    </div>
  </div>
</div>
